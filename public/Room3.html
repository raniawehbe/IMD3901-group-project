<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMD3901 Term Project</title>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="/js/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    
</head>
<body>

  <script>
    AFRAME.registerComponent('add-ui', {
    schema: {
            default: '',
            parse: AFRAME.utils.styleParser.parse
            },

    init: function () {
        
        const el = this.el;
        console.log('I am ready!');

        el.addEventListener('click', function() {
            

            var entityEl = document.createElement('a-entity');
            //entityEl.setAttribute('add-UI', '');
            entityEl.setAttribute('id', "ui");
            entityEl.setAttribute('position', "-0.999 2.741 1.609");
            entityEl.setAttribute('rotation', "0 36.925 0");
            entityEl.setAttribute('scale', "3.084 2.355 0.239");
            entityEl.setAttribute('geometry', {primitive: 'box', width:0.4, height:0.4, depth:0.4});
            entityEl.setAttribute('material', "color: '#ACC'");
              
            
            el.sceneEl.appendChild(entityEl);
            

        });
    }
    });

    AFRAME.registerComponent('spinning-effect', {
  schema: {
    duration: {type: 'number', default:20000.0},  //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF.walls      = document.querySelector('#chair');
    Context_AF.isSpinning = false;
    
    //let's add the basic animation to teh walls entity
    //note that it is not enabled initially
    Context_AF.walls.setAttribute('animation', {property:'position.y', to:0, dur:300, easing:'linear'});
     
    //listen on click
    Context_AF.el.addEventListener('click', function() {
      if (Context_AF.isSpinning === true) {
        console.log('stop spinning');
        Context_AF.walls.setAttribute('animation', {to:0});
        Context_AF.isSpinning = false;
      }
      else {
        console.log('spinning');
        Context_AF.walls.setAttribute('animation', {to:0.9});
        Context_AF.isSpinning = true;
      }
    });
  },
  

});

</script>

<a-scene start-experience>
    <a-assets timeout="10000">
    <a-asset-item id="bed_model"     response-type="arraybuffer" src="/assets/1800's/bed.glb"></a-asset-item>
    <a-asset-item id="carpet_model"     response-type="arraybuffer" src="/assets/1800's/carpet.glb"></a-asset-item>
    <a-asset-item id="carpet2_model"     response-type="arraybuffer" src="/assets/1800's/carpet.glb"></a-asset-item>
    <a-asset-item id="closet_model"     response-type="arraybuffer" src="/assets/1800's/closet.glb"></a-asset-item>
    <a-asset-item id="frame_model"     response-type="arraybuffer" src="/assets/1800's/frame.glb"></a-asset-item>
    <a-asset-item id="mirror_model"     response-type="arraybuffer" src="/assets/1800's/mirror.glb"></a-asset-item>
    <a-asset-item id="teddy_model"     response-type="arraybuffer" src="/assets/1800's/teddy.glb"></a-asset-item>
    <a-asset-item id="hockeyStick_model"     response-type="arraybuffer" src="/assets/1800's/hockeyStick.glb"></a-asset-item>
    <a-asset-item id="hockeyStick2_model"     response-type="arraybuffer" src="/assets/1800's/hockeyStick.glb"></a-asset-item>
    <a-asset-item id="table_model"     response-type="arraybuffer" src="/assets/1800's/table.glb"></a-asset-item>
    <a-asset-item id="piano_model"     response-type="arraybuffer" src="/assets/1800's/piano.glb"></a-asset-item>
    <a-asset-item id="telephone_model"     response-type="arraybuffer" src="/assets/1800's/telephone.glb"></a-asset-item>
    <a-asset-item id="typewriter_model"     response-type="arraybuffer" src="/assets/1800's/typewriter.glb"></a-asset-item>
    <a-asset-item id="chair2_model"     response-type="arraybuffer" src="/assets/1800's/chair2.glb"></a-asset-item>

    <!-- CLUE -->
    <a-asset-item id="1800Glove_model"     response-type="arraybuffer" src="/assets/Clue_Texture/1800Glove.glb"></a-asset-item>
    <a-asset-item id="1800Glove_model"     response-type="arraybuffer" src="/assets/Clue_Texture/1800Glove.glb"></a-asset-item>
    <a-asset-item id="1800Hocky_model"     response-type="arraybuffer" src="/assets/Clue_Texture/1800Hocky.glb"></a-asset-item>
    <a-asset-item id="1800Pic_model"     response-type="arraybuffer" src="/assets/Clue_Texture/1800Pic.glb"></a-asset-item>
  
  </a-assets>

  <!--Sound for teddy bear-->
  <a-assets>
    <audio id="O'canada" src="/assets/1800's/O'Canada.mp3"></audio>
</a-assets>
 

  <a-entity id= "camera" camera="active: true" look-controls wasd-controls position="10 3 3" rotation="20 60 0">
    <a-entity light="type:spot; intensity:0.7; castShadow:true; shadowBias:0.5; angle:50; penumbra:0.5;" position="0.5 -0.5 0" rotation="0 0 0"></a-entity>
    <a-entity cursor="rayOrigin:mouse;" raycaster="far:50; interval:200; objects:.interactive">
    
    <a-gui-cursor id="cursor"
						  raycaster="objects: [gui-interactable]"
						  fuse="false"
				>
				</a-gui-cursor> <!-- /cursor -->
    </a-entity>

  </a-entity>
</a-entity>


 
  <a-entity id="clue1" position = "-1 0 1.6">         
    <a-entity id="teddy" class= "interactive" add-ui position="4.3589 1.76205 -2.60382" rotation="-90 110 0" scale="0.03 0.03 0.03"
              gltf-model="#teddy_model"
              animation__click="property:position.y; to:1.9; startEvents:click; dur:300" 
              animation__rotation="property:rotation; to:-90 490 0; loop:true; dur:20000; startEvents:click;"
              shadow
              sound=                "src: #O'canada;  volume: 5"
              play-sound-on-event=  "mode: toggle-stop; event: click" >
    </a-entity>
  </a-entity> 


  <a-entity id="clue" class= "cube interactive"
              position="29.59276 8.86245 34.23291"
              scale="1.889 1.889 1.889"
              geometry="primitive:box; width:3.0; height:4.0; depth:1.0" 
              material="color:#FFFFFF;"
              animation__rotation="property:rotation; to:-90 490 0; loop:true; dur:20000; startEvents:click;">
  </a-entity>


  <a-entity id=" position = "8.5 0 -8.7">
    <a-entity id="hockeyStick" class="interactive" position="0 0 0" rotation="-3 0 0" scale="0.02 0.02 0.02"
              gltf-model="#hockeyStick_model"
              animation__click="property:position.y; to:0.9; startEvents:click; dur:300" 
              animation__rotation="property:rotation; to:-3 490 0; loop:true; dur:20000; startEvents:click;"
              shadow>
    </a-entity>
  </a-entity>
  <a-entity id="carpet" position="7.9697 0.1 -0.01749" rotation="0 90.01166961505233 0" scale="0.19534 0.19534 0.19534" gltf-model="#carpet_model" shadow=""></a-entity>
  <a-entity id="closet" position="2.57502 0 -5.52127" rotation="0 -90 0" scale="0.03 0.03 0.03" gltf-model="#closet_model" shadow=""></a-entity>
  <a-entity id="frame" position="2.65027 4.30231 -6.13857" rotation="0 180 0" scale="2 2 2" gltf-model="#frame_model" shadow=""></a-entity>
  <a-entity id="mirror" position="1.24552 0 7.1045" rotation="0 -180 0" scale="0.02 0.02 0.02" gltf-model="#mirror_model" shadow=""></a-entity>
  <a-entity id="hockeyStick2" position="7.5 0 -8.7" rotation="4.7 180 10" scale="0.02 0.02 0.02" gltf-model="#hockeyStick2_model" shadow></a-entity>
  <a-entity id="table" position="4 0 4" rotation="0 0 0" scale="0.02 0.02 0.02" gltf-model="#table_model" shadow></a-entity>
  <a-entity id="bed" position="3.70784 0 2.68486" rotation="0 92.0725988041379 0" scale="5 5 5" gltf-model="#bed_model" shadow=""></a-entity>
  <a-entity id="piano" position="10.87344 0 2.3802" rotation="0 -90 0" scale="0.0033 0.0033 0.0033" gltf-model="#piano_model" shadow=""></a-entity>
  <a-entity id="telephone" position="8.12176 3.4049 7.15302" rotation="0 179.50080172094536 0" scale="0.0025 0.0025 0.0025" gltf-model="#telephone_model" shadow=""></a-entity>
  <a-entity id="typewriter" position="5.37569 2.26412 6.57376" rotation="0 92.44387545538268 0" scale="0.04371 0.04371 0.04371" gltf-model="#typewriter_model" shadow=""></a-entity>
  <a-entity id="chair2" position="6.71628 0.49765 -5.36218" rotation="0 2.7857207999260623 0" scale="2.17994 2.17994 2.17994" gltf-model="#chair2_model" shadow=""></a-entity>

  <!-- CLUE -->
  <a-entity id="1800Glove"position="4 2.68 -2.93" rotation="0 0 0" scale="0.6 0.25 0.25" gltf-model="#1800Glove_model" shadow=""></a-entity>
  <a-entity id="1800Glove"position="10.5 1.184 -1.39" rotation="0 0 0" scale="0.6 0.25 0.25" gltf-model="#1800Glove_model" shadow=""></a-entity>
  <a-entity id="1800Hocky"position="0.110 0.199 4.451" rotation="0 90 0" scale="0.03 0.025 0.03" gltf-model="#1800Hocky_model" shadow=""></a-entity>
  <a-entity id="1800Hocky"position="0 0.199 5.451" rotation="10.750 -90 0" scale="0.03 0.025 0.03" gltf-model="#1800Hocky_model" shadow=""></a-entity>
  <a-entity id="1800Pic"position="12.6 1.5 0" rotation="0 0 0" scale="0.6 1.4 -2.3" gltf-model="#1800Pic_model" shadow=""></a-entity>


  <a-entity id="rooms">
    <a-entity class="ground" geometry="primitive: plane; width: 23; height: 23" material="color: black" position="6.16024 0.01 0.42501" rotation="-90 0 0" shadow="cast: false"></a-entity>
    <a-entity class="wall" geometry="width: 90; height: 70" material="src: /assets/1800's/3.jpg" position="6.05985 5.68544 -6.88412" rotation="" scale="0.1848 0.17688 0.17688" shadow="cast: false"></a-entity>
    <a-entity class="wall" geometry="width: 90; height: 70" material="src: /assets/1800's/3.jpg" position="5.83484 5.68544 7.91347" rotation="0 -180 0" scale="0.1848 0.17688 0.17688" shadow="cast: false"></a-entity>
    <a-entity class="wall" geometry="width: 90; height: 70" material="src: /assets/1800's/3.jpg" position="12.80583 5.68544 0.62249" rotation="0 -90 0" scale="0.1848 0.17688 0.17688" shadow="cast: false"></a-entity>
    <a-entity class="wall" geometry="width: 90; height: 70" material="src: /assets/1800's/3.jpg" position="-0.99558 5.68544 0.60362" rotation="0 90 0" scale="0.1848 0.17688 0.17688" shadow="cast: false"></a-entity>
  </a-entity>

  <a-gui-flex-container 
	flex-direction="column" justify-content="center" align-items="normal" component-padding="0.1" opacity="0.7" width="3.5" height="4.5"
	position="15.499 2.5 -1.424" rotation="0 -90 0"
>
... gui items here...
  <a-gui-label 
          width="2.5" height="0.75"
          position="0 1.639 0.01"
          value="Answer Question"
          font-family="Arial"
          margin="0 0 0.05 0"
        >
    </a-gui-label>
    
    <a-gui-button 
      width="2.5" height="0.75"
      onclick="buttonActionFunction" key-code="32"
      position="-0.853 0.288 0.010"
      scale="0.611 0.796 1"
      value="option 1"
      font-family="Arial"
      margin="0 0 0.05 0"
    >
    </a-gui-button>

    <a-gui-button 
      width="2.5" height="0.75"
      onclick="buttonActionFunction" key-code="32"
      position="-0.853 0.288 0.010"
      scale="0.611 0.796 1"
      value="option 2"
      font-family="Arial"
      margin="0 0 0.05 0"
    >
    </a-gui-button>

    <a-gui-button 
      width="2.5" height="0.75"
      onclick="buttonActionFunction" key-code="32"
      position="-0.853 0.288 0.010"
      scale="0.611 0.796 1"
      value="option 3"
      font-family="Arial"
      margin="0 0 0.05 0"
    >
    </a-gui-button>

    <a-gui-button 
      width="2.5" height="0.75"
      onclick="buttonActionFunction" key-code="32"
      position="-0.853 0.288 0.010"
      scale="0.611 0.796 1"
      value="option 4"
      font-family="Arial"
      margin="0 0 0.05 0"
    >
    </a-gui-button>

      
</a-gui-flex-container>
  
  
  
</a-scene>
</body>
</html>