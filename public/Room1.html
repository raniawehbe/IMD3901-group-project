<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMD3901 Term Project</title>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    
</head>
<body>

  <script>
    AFRAME.registerComponent('add-ui', {
    schema: {
            default: '',
            parse: AFRAME.utils.styleParser.parse
            },
    multiple: false,       
    init: function () {
        
        const el = this.el;
        console.log('I am ready!');

        el.addEventListener('click', function() {
            

            var entityEl = document.createElement('a-entity');
            //entityEl.setAttribute('add-UI', '');
            entityEl.setAttribute('id', "ui");
            entityEl.setAttribute('class', "ui");
            entityEl.setAttribute('position', "29.569 16.108 34.191");
            entityEl.setAttribute('rotation', "0 40.445 0");
            entityEl.setAttribute('scale', "27.674 21.132 1.125");
            entityEl.setAttribute('geometry', {primitive: 'box', width:0.4, height:0.4, depth:0.4});
            entityEl.setAttribute('material', "color: #995d46");
              
            
            el.sceneEl.appendChild(entityEl);
            

        });
    }
    });

    AFRAME.registerComponent('add-ui2', {
    schema: {
            default: '',
            parse: AFRAME.utils.styleParser.parse
            },

    init: function () {
        
        const el = this.el;
        console.log('I am ready!');

        el.addEventListener('click', function() {
            

            var entityEl = document.createElement('a-entity');
            //entityEl.setAttribute('add-UI', '');
            entityEl.setAttribute('id', "ui2");
            entityEl.setAttribute('class', "ui2");
            entityEl.setAttribute('position', "-6.931 36.962 -39.723");
            entityEl.setAttribute('rotation', "0 2.063 0");
            entityEl.setAttribute('scale', "27.674 21.022 1.125");
            entityEl.setAttribute('geometry', {primitive: 'box', width:0.4, height:0.4, depth:0.4});
            entityEl.setAttribute('material', "color: #995d46");
              
            
            el.sceneEl.appendChild(entityEl);
            

        });
    }
    });

    AFRAME.registerComponent('add-ui3', {
    schema: {
            default: '',
            parse: AFRAME.utils.styleParser.parse
            },

    init: function () {
        
        const el = this.el;
        console.log('I am ready!');

        el.addEventListener('click', function() {
            

            var entityEl = document.createElement('a-entity');
            //entityEl.setAttribute('add-UI', '');
            entityEl.setAttribute('id', "ui3");
            entityEl.setAttribute('class', "ui3");
            entityEl.setAttribute('position', "-29.889 29.785 -46.237");
            entityEl.setAttribute('rotation', "0 23.975 0");
            entityEl.setAttribute('scale', "27.674 21.022 1.125");
            entityEl.setAttribute('geometry', {primitive: 'box', width:0.4, height:0.4, depth:0.4});
            entityEl.setAttribute('material', "color: #995d46");
              
            
            el.sceneEl.appendChild(entityEl);
            

        });
    }
    });

    AFRAME.registerComponent('add-ui4', {
    schema: {
            default: '',
            parse: AFRAME.utils.styleParser.parse
            },

    init: function () {
        
        const el = this.el;
        console.log('I am ready!');

        el.addEventListener('click', function() {
            

            var entityEl = document.createElement('a-entity');
            //entityEl.setAttribute('add-UI', '');
            entityEl.setAttribute('id', "ui4");
            entityEl.setAttribute('class', "ui4");
            entityEl.setAttribute('position', "29.183 27.196 -11.153");
            entityEl.setAttribute('rotation', "0 88.824 0");
            entityEl.setAttribute('scale', "27.674 21.132 1.125");
            entityEl.setAttribute('geometry', {primitive: 'box', width:0.4, height:0.4, depth:0.4});
            entityEl.setAttribute('material', "color: #995d46");
              
            
            el.sceneEl.appendChild(entityEl);
            

        });
    }
    });

  AFRAME.registerComponent('spinning-effect', {
  schema: {
    duration: {type: 'number', default:20000.0},  //duration is in milliseconds
    parse: AFRAME.utils.styleParser.parse
  },
  //multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF.walls      = document.querySelector('#letter_clue');
    Context_AF.isSpinning = false;
    
    //let's add the basic animation to teh walls entity
    //note that it is not enabled initially
    Context_AF.walls.setAttribute('animation', {property:'position.y', to:8.86245, dur:300, easing:'linear'});
     
    //listen on click
    Context_AF.el.addEventListener('click', function() {
      if (Context_AF.isSpinning === true) {
        console.log('stop spinning');
        Context_AF.walls.setAttribute('animation', {to:8.86245});
        Context_AF.isSpinning = false; 

        document.querySelectorAll(".ui").forEach(e => e.parentNode.removeChild(e));
      }
      else {
        console.log('spinning');
        Context_AF.walls.setAttribute('animation', {to:9.8});
        Context_AF.isSpinning = true;

                 
      }
    });
  },
  

});

AFRAME.registerComponent('spinning-effect2', {
  schema: {
    duration: {type: 'number', default:20000.0},  //duration is in milliseconds
    parse: AFRAME.utils.styleParser.parse
  },
  //multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF.walls      = document.querySelector('#card_clue');
    Context_AF.isSpinning = false;
    
    //let's add the basic animation to teh walls entity
    //note that it is not enabled initially
    Context_AF.walls.setAttribute('animation', {property:'position.z', to:3-51.57049, dur:300, easing:'linear'});
     
    //listen on click
    Context_AF.el.addEventListener('click', function() {
      if (Context_AF.isSpinning === true) {
        console.log('stop spinning');
        Context_AF.walls.setAttribute('animation', {to:-51.57049});
        Context_AF.isSpinning = false; 

        document.querySelectorAll(".ui2").forEach(e => e.parentNode.removeChild(e));
      }
      else {
        console.log('spinning');
        Context_AF.walls.setAttribute('animation', {to:-40});
        Context_AF.isSpinning = true;

                 
      }
    });
  },
  

});

AFRAME.registerComponent('spinning-effect3', {
  schema: {
    duration: {type: 'number', default:20000.0},  //duration is in milliseconds
    parse: AFRAME.utils.styleParser.parse
  },
  //multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF.walls      = document.querySelector('#postcard_clue');
    Context_AF.isSpinning = false;
    
    //let's add the basic animation to teh walls entity
    //note that it is not enabled initially
    Context_AF.walls.setAttribute('animation', {property:'position.y', to:16.0656, dur:300, easing:'linear'});
     
    //listen on click
    Context_AF.el.addEventListener('click', function() {
      if (Context_AF.isSpinning === true) {
        console.log('stop spinning');
        Context_AF.walls.setAttribute('animation', {to:16.0656});
        Context_AF.isSpinning = false; 

        document.querySelectorAll(".ui3").forEach(e => e.parentNode.removeChild(e));
      }
      else {
        console.log('spinning');
        Context_AF.walls.setAttribute('animation', {to:17.3});
        Context_AF.isSpinning = true;

                 
      }
    });
  },
  

});

AFRAME.registerComponent('spinning-effect4', {
  schema: {
    duration: {type: 'number', default:20000.0},  //duration is in milliseconds
    parse: AFRAME.utils.styleParser.parse
  },
  //multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF.walls      = document.querySelector('#newspaper_clue');
    Context_AF.isSpinning = false;
    
    //let's add the basic animation to teh walls entity
    //note that it is not enabled initially
    Context_AF.walls.setAttribute('animation', {property:'position.y', to:19.28847, dur:300, easing:'linear'});
     
    //listen on click
    Context_AF.el.addEventListener('click', function() {
      if (Context_AF.isSpinning === true) {
        console.log('stop spinning');
        Context_AF.walls.setAttribute('animation', {to:19.28847});
        Context_AF.isSpinning = false; 

        document.querySelectorAll(".ui4").forEach(e => e.parentNode.removeChild(e));
      }
      else {
        console.log('spinning');
        Context_AF.walls.setAttribute('animation', {to:20.4});
        Context_AF.isSpinning = true;

                 
      }
    });
  },
});


AFRAME.registerComponent('false-clue', {
  schema: {
    duration: {type: 'number', default:20000.0},  //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF.walls      = document.querySelector('#picture-frame');
    Context_AF.isSpinning = false;
    
    //let's add the basic animation to teh walls entity
    //note that it is not enabled initially
    Context_AF.walls.setAttribute('animation', {property:'position.y', to:18.02653, dur:300, easing:'linear'});
     
    //listen on click
    Context_AF.el.addEventListener('click', function() {
      if (Context_AF.isSpinning === true) {
        console.log('stop spinning');
        Context_AF.walls.setAttribute('animation', {to:18.02653});
        Context_AF.isSpinning = false;
      }
      else {
        console.log('spinning');
        Context_AF.walls.setAttribute('animation', {to:19.5});
        Context_AF.isSpinning = true;
      }
    });
  },
  

});

AFRAME.registerComponent('false-clue2', {
  schema: {
    duration: {type: 'number', default:20000.0},  //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF.walls      = document.querySelector('#diary');
    Context_AF.isSpinning = false;
    
    //let's add the basic animation to teh walls entity
    //note that it is not enabled initially
    Context_AF.walls.setAttribute('animation', {property:'position.y', to:17.90097, dur:300, easing:'linear'});
     
    //listen on click
    Context_AF.el.addEventListener('click', function() {
      if (Context_AF.isSpinning === true) {
        console.log('stop spinning');
        Context_AF.walls.setAttribute('animation', {to:17.90097});
        Context_AF.isSpinning = false;
      }
      else {
        console.log('spinning');
        Context_AF.walls.setAttribute('animation', {to:19.2});
        Context_AF.isSpinning = true;
      }
    });
  },
  
});

AFRAME.registerComponent('questionBtn', {
  schema: {
    parse: AFRAME.utils.styleParser.parse
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function() {
    
    //get a local reference to our entities and set some property variables
    const Context_AF = this;
    Context_AF     = document.querySelector('#question');
    Context_AF.questionBtn = true;

    
    Context_AF.setAttribute('visible', "false");
   
     
    //if(height === "29.59276 9.8 34.23291"){
                         //Context_AF.walls.setAttribute('visible', 'true');
    //}
  
    
  },
  
});

</script>
     
      <a-scene>
        <a-assets timeout="10000">
       
          <a-asset-item id=  "bed_model"        response-type="arraybuffer"  src="/assets/bed.glb"></a-asset-item>
          <a-asset-item id=  "book_model"        response-type="arraybuffer"  src="/assets/book.glb"></a-asset-item>
          <a-asset-item id=  "box_model"        response-type="arraybuffer"  src="/assets/box.glb"></a-asset-item>
          <a-asset-item id=  "carpet_model"        response-type="arraybuffer"  src="/assets/carpet.glb"></a-asset-item>
          <a-asset-item id=  "chair_model"        response-type="arraybuffer"  src="/assets/chair.glb"></a-asset-item>
          <a-asset-item id=  "diary_model"        response-type="arraybuffer"  src="/assets/diary.glb"></a-asset-item>
          <a-asset-item id=  "envelope_model"        response-type="arraybuffer"  src="/assets/envelope.glb"></a-asset-item>
          <a-asset-item id=  "rug_model"        response-type="arraybuffer"  src="/assets/rug.glb"></a-asset-item>
          <a-asset-item id=  "table_model"        response-type="arraybuffer"  src="/assets/table.glb"></a-asset-item>
          <a-asset-item id=  "wall candle_model"        response-type="arraybuffer"  src="/assets/wall candle.glb"></a-asset-item>
          <a-asset-item id=  "waredrobe_model"        response-type="arraybuffer"  src="/assets/waredrobe.glb"></a-asset-item>
          <a-asset-item id=  "waredrobe2_model"        response-type="arraybuffer"  src="/assets/waredrobe2.glb"></a-asset-item>
          <a-asset-item id=  "window_model"        response-type="arraybuffer"  src="/assets/window.glb"></a-asset-item>
          <a-asset-item id=  "picture frame_model"        response-type="arraybuffer"  src="/assets/picture frame.glb"></a-asset-item>
          <a-asset-item id=  "suitcase_model"        response-type="arraybuffer"  src="/assets/suitcase.glb"></a-asset-item>

          <img id=           "Floor_Texture_img"                                   src="/assets/Floor_Texture.jpg"               crossorigin="anonymous">
          <img id=           "Wall_Texture_img"                                    src="/assets/Wall_Texture.jpg"             crossorigin="anonymous">
       
        </a-assets>

      <a-entity environment="preset:default;"></a-entity>
      <a-entity sound= "src:#BackgroundSound; autoplay:true;"></a-entity>

      <a-entity id= "camera" camera="active: true" look-controls wasd-controls position="1 35 60" rotation="-45 100 0">
        <a-entity cursor="rayOrigin:mouse;" raycaster="far:50; interval:200; objects:.interactive"></a-entity>
        <a-gui-cursor id="cursor"
                raycaster="objects: [gui-interactable]"
                fuse="false">
        </a-gui-cursor>

        <a-gui-flex-container id="question" questionBtn
          flex-direction="column" justify-content="center" align-items="normal" component-padding="0.1" opacity="0.7" width="3.5" height="4.5"
          position="-1.428 -0.710 -1.000" scale="0.142 0.041 0.082" >        
            <a-gui-button 
              width="2.5" height="0.75"
              onclick="buttonActionFunction" key-code="32"
              position="0 0.025 0" scale="1.242 4.282 1.027"
              value=" Proceed to Questions"
              font-family="Arial"
              margin="0 0 0.05 0"
            >
            </a-gui-button>
        </a-gui-flex-container>

      </a-entity>
      
    </a-entity>
     
      <a-entity id="bed" position="-50.16487 6.99694 2.58549" rotation="0.03609634109324186 92.11 -0.12662367272391195" scale="13.483 14.69246 13.483" gltf-model="/assets/bed.glb"></a-entity>
      <a-entity id="carpet" position="-2.76955 0.68758 0.78815" rotation="" scale="-0.11871 -0.11871 -0.11871" gltf-model="/assets/carpet.glb"></a-entity>
      <a-entity id="book" position="28.16331 16.85335 -0.35118" rotation="" scale="1.51003 1.51003 1.51003" gltf-model="#book_model" grabbable draggable droppable shadow
      event-set__dragdrop="_event:drag-drop; geometry.primitive: sphere;geometry.radius: 0.25"
      event-set__dragon="_event:dragover-start; material.wireframe: true"
      event-set__dragoff="_event:dragover-end; material.wireframe: false"></a-entity></a-entity>
      <a-entity id="box" position="32.1904 4.16369 31.27557" rotation="0 -20.936450791875412 0" scale="0.13538 0.13538 0.13538" gltf-model="/assets/box.glb"></a-entity>
      <a-entity id="chair" position="31.9861 -16.26944 -39.04351" rotation="0 -65.17280328054089 0" scale="6.19715 6.19744 6.19744" gltf-model="/assets/chair.glb"></a-entity>
      
      <a-entity position="25.9588 0 0.20169">
        <a-entity id="diary" class="interactive" false-clue2 position="0 17.90097 0" rotation="26.682644519242437 -62.05533991723407 0" scale="0.09856 0.09856 0.09856" gltf-model="/assets/diary.glb"></a-entity>
      </a-entity>

      <a-entity id="envelope" position="32.9843 18.02361 11.47743" rotation="0 159.93830372179366 0" scale="0.30913 0.30913 0.30913" gltf-model="/assets/envelope.glb"></a-entity>
      <a-entity id="table" position="31.25528 0.07438 -0.31083" rotation="0 -88.8863805054154 0" scale="1.46873 1.46873 1.46873" gltf-model="/assets/table.glb"></a-entity>
      <a-entity id="wall candle" position="-67.10688 24.92195 -23.62657" rotation="0 90 0" scale="0.21736 0.21736 0.21736" gltf-model="/assets/wall candle.glb"></a-entity>
      <a-entity id="wall candle2" position="-67.10688 24.92195 29.42788" rotation="0 90 0" scale="0.21736 0.21736 0.21736" gltf-model="/assets/wall candle.glb"></a-entity>
      <a-entity id="waredrobe2" position="-2.93206 -0.77395 -60.98832" rotation="-180 0 0" scale="-0.145 -0.145 -0.145" gltf-model="/assets/waredrobe2.glb"></a-entity>
      
      <a-entity position="35.71896 0 12.32969">
        <a-entity id="picture-frame" class="interactive" false-clue position="0 18.02653 0" rotation="0 -102.81899520961161 0" scale="0.31132 0.31132 0.31132" gltf-model="/assets/picture frame.glb"></a-entity>
      </a-entity>
      
      <a-entity id="suitcase" position="-29.72207 0.29448 -48.26217" rotation="0 26.389290128135457 0" scale="0.48 0.48 0.48" gltf-model="/assets/suitcase.glb"></a-entity>
      
      <a-entity id="clues">
        <a-entity  position = "29.59276 0 34.23291">
          <a-box id="letter_clue" class= "cube interactive" add-ui spinning-effect position="29.59276 8.86245 34.23291" rotation="0 0 0" color="#ff0000" scale="1.889 1.889 1.889"  
                animation__rotation="property:rotation; to:0 360 0; loop:true; dur:10000; startEvents:click;"
                shadow >
          </a-box> 
        </a-entity>

        <a-entity position="-7.64263 30.10749 0">
          <a-box id="card_clue" class= "cube interactive" position="-7.64263 30.10749 -51.57049" add-ui2 spinning-effect2 rotation="0 0 0" color="#ff0000" scale="1.889 1.889 1.889"
            animation__rotation="property:rotation; to:0 360 0; loop:true; dur:10000; startEvents:click;"
            shadow>
          </a-box>
        </a-entity>

        <a-entity position="-30.24706 0 -46.50628">
          <a-box id="postcard_clue"  class= "cube interactive" position="-30.24706 16.0656 -46.50628"  add-ui3 spinning-effect3 rotation="0 0 0" color="#ff0000"  geometry="" scale="1.889 1.889 1.889"
            animation__rotation="property:rotation; to:0 360 0; loop:true; dur:10000; startEvents:click;"
            shadow>
          </a-box>
        </a-entity>

        <a-entity position="29.2662 0 -11.37426">
          <a-box id="newspaper_clue" class= "cube interactive" position="29.2662 19.28847 -11.37426" add-ui4 spinning-effect4 rotation="0 0 0" color="#ff0000"  geometry="" scale="1.889 1.889 1.889"
            animation__rotation="property:rotation; to:0 360 0; loop:true; dur:10000; startEvents:click;"
            shadow> 
          </a-box>
       </a-entity>

      </a-entity> 

      <a-entity id="room">
        <a-entity class="ground" geometry="primitive: plane; width: 90; height: 90" material="src:/assets/Floor_Texture.jpg"position="-10.44656 0 -7.29101" rotation="-90 0 0" scale="1.4 1.4 1.4" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 90; height: 70" material="src:/assets/Wall_Texture.jpg" position="-70.31305 47 -6.711" rotation="0 90 0" scale="1.4 1.4 1.4" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 90; height: 70" material="src:/assets/Wall_Texture.jpg" position="49.05643 47 -6.71141" rotation="0 -90 0" scale="1.4 1.4 1.4" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 90; height: 70" material="src:/assets/Wall_Texture.jpg" position="-13.29203 47 55.20319" rotation="0 180 0" scale="1.4 1.4 1.4" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 90; height: 70" material="src:/assets/Wall_Texture.jpg" position="-13.29203 47 -68.88783" rotation="0 -180 0" scale="1.4 1.4 1.4" shadow="cast: false"></a-entity>
      </a-entity>

     <!-- <a-gui-flex-container 
      flex-direction="column" justify-content="center" align-items="normal" component-padding="0.1" opacity="0.7" width="3.5" height="4.5"
      position="15.499 2.5 -1.424" rotation="0 -90 0"
    >
    
      <a-gui-label 
              width="2.5" height="0.75"
              position="0 1.639 0.01"
              value="Answer Question"
              font-family="Arial"
              margin="0 0 0.05 0"
            >
        </a-gui-label>
        
        <a-gui-button 
          width="2.5" height="0.75"
          onclick="buttonActionFunction" key-code="32"
          position="-0.853 0.288 0.010"
          scale="0.611 0.796 1"
          value="option 1"
          font-family="Arial"
          margin="0 0 0.05 0"
        >
        </a-gui-button>
    
        <a-gui-button 
          width="2.5" height="0.75"
          onclick="buttonActionFunction" key-code="32"
          position="-0.853 0.288 0.010"
          scale="0.611 0.796 1"
          value="option 2"
          font-family="Arial"
          margin="0 0 0.05 0"
        >
        </a-gui-button>
    
        <a-gui-button 
          width="2.5" height="0.75"
          onclick="buttonActionFunction" key-code="32"
          position="-0.853 0.288 0.010"
          scale="0.611 0.796 1"
          value="option 3"
          font-family="Arial"
          margin="0 0 0.05 0"
        >
        </a-gui-button>
    
        <a-gui-button 
          width="2.5" height="0.75"
          onclick="buttonActionFunction" key-code="32"
          position="-0.853 0.288 0.010"
          scale="0.611 0.796 1"
          value="option 4"
          font-family="Arial"
          margin="0 0 0.05 0"
        >
        </a-gui-button>
    
          
    </a-gui-flex-container>-->
    </a-scene>

  </body>

</html>