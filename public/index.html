<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMD3901 Term Project</title>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
</head>
<body>

<script>
            AFRAME.registerComponent('add-ui', {
            schema: {
                    default: '',
                    parse: AFRAME.utils.styleParser.parse
                    },

            init: function () {
                
                const el = this.el;
                console.log('I am ready!');

                el.addEventListener('click', function() {
                    

                    var entityEl = document.createElement('a-entity');
                    //entityEl.setAttribute('add-UI', '');
                    entityEl.setAttribute('id', "ui");
                    entityEl.setAttribute('position', "0 1.461 0");
                    entityEl.setAttribute('scale', "3.084 2.355 0.239");
                    entityEl.setAttribute('geometry', {primitive: 'box', width:0.4, height:0.4, depth:0.4});
                    entityEl.setAttribute('material', "color: '#ACC'");
                      
                    
                    el.sceneEl.appendChild(entityEl);
                    

                });
            }
            });

            AFRAME.registerComponent('visibility', {
            schema: {
                duration: {type: 'number', default:20000.0},  //duration is in milliseconds
            },
            multiple: false, //do not allow multiple instances of this component on this entity
            init: function() {
                
                //get a local reference to our entities and set some property variables
                const Context_AF = this;
                //Context_AF2  = this;

                Context_AF.question      = document.querySelector('#box2');
                Context_AF.question.setAttribute('visible', "false");

                Context_AF.question2       = document.querySelector('#box');
                height = Context_AF.question2.getAttribute('position');

                console.log(height);

                //Context_AF.el.addEventListener('click', function() {

                    if(height.y == 0.6){
                        Context_AF.question.setAttribute('visible', "true");
                        console.log("height reached");
                   }
                
                //});        
              
               
            },
            
            });

            AFRAME.registerComponent('next_question', {
        schema: {
          default: '', //duration is in milliseconds
        },
        multiple: false, //do not allow multiple instances of this component on this entity
        init: function () {
            
            //get a local reference to our entities and set some property variables
            const Context_AF = this;
            //Context_AF2  = this;

            Context_AF.question1      = document.querySelector('#question1');
            Context_AF.question2      = document.querySelector('#question2');
            Context_AF.question1end      = document.querySelector('#question1_end');
            Context_AF.choice1     = document.querySelector('#question1_choice1');
            Context_AF.choice2     = document.querySelector('#question1_choice2');
            Context_AF.Q2choice1     = document.querySelector('#question2_choice1');
            Context_AF.Q2choice2     = document.querySelector('#question2_choice2');

            Context_AF.question2.setAttribute('visible', "false");

            //Context_AF.question1.setAttribute('visible', "true");
            //Context_AF.question2.setAttribute('visible', "false");

            Context_AF.el.addEventListener('click', function() {
              
                    
                    Context_AF.question1.setAttribute('visible', "false");
                    Context_AF.question2.setAttribute('visible', "true");
                    Context_AF.question1end.setAttribute('class', "");
                    Context_AF.choice1.setAttribute('class', "");
                    Context_AF.choice2.setAttribute('class', "");
                    Context_AF.Q2choice1.setAttribute('class', "interactive");
                    Context_AF.Q2choice2.setAttribute('class', "interactive");

                    console.log("next question: 2");
                          
            
            });        
          
        
        },
        
});

AFRAME.registerComponent('next_question2', {
  schema: {
    default: '', //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function () {
      
      //get a local reference to our entities and set some property variables
      const Context_AF = this;
      //Context_AF2  = this;

      Context_AF.question2     = document.querySelector('#question2');
      Context_AF.question3     = document.querySelector('#question3');
      Context_AF.question2end  = document.querySelector('#question2_end2');
      Context_AF.choice1       = document.querySelector('#question2_choice1');
      Context_AF.choice2       = document.querySelector('#question2_choice2');
      Context_AF.Q3choice1     = document.querySelector('#question3_choice1');
      Context_AF.Q3choice2     = document.querySelector('#question3_choice2');

      //Context_AF.question1.setAttribute('visible', "true");
      //Context_AF.question2.setAttribute('visible', "false");

      Context_AF.el.addEventListener('click', function() {
        
              
            Context_AF.question2.setAttribute('visible', "false");
            Context_AF.question3.setAttribute('visible', "true");

            Context_AF.question2end.setAttribute('class', "");
            Context_AF.choice1.setAttribute('class', "");
            Context_AF.choice2.setAttribute('class', "");

            Context_AF.Q3choice1.setAttribute('class', "interactive");
            Context_AF.Q3choice2.setAttribute('class', "interactive");

            console.log("next question: 3");
                    
      
      });        
    
  
  },
  
});

AFRAME.registerComponent('question1_correct', {
  schema: {
    default: '', //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function () {
      
      //get a local reference to our entities and set some property variables
      const Context_AF = this;
      //Context_AF2  = this;

      Context_AF.question1Btn      = document.querySelector('#question1_end');
      Context_AF.choice1     = document.querySelector('#question1_choice1');
      Context_AF.choice2     = document.querySelector('#question1_choice2');

      Context_AF.question1Btn.setAttribute('visible', "false");
 

      Context_AF.el.addEventListener('click', function() {
          
            Context_AF.question1Btn.setAttribute('visible', "true");

            Context_AF.choice2.setAttribute('active-color', '#22252a');
            Context_AF.choice2.setAttribute('handle-color', '#22252a');
                    
      
      });        
    
  
  },
  
});

AFRAME.registerComponent('question2_correct', {
  schema: {
    default: '', //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function () {
      
      //get a local reference to our entities and set some property variables
      const Context_AF = this;
      //Context_AF2  = this;

      Context_AF.question2Btn = document.querySelector('#question2_end2');


      Context_AF.question2Btn.setAttribute('visible', "false");
 

      Context_AF.el.addEventListener('click', function() {
          
            Context_AF.question2Btn.setAttribute('visible', "true");

      
      });        
    
  
  },
  
});

AFRAME.registerComponent('question3_correct', {
  schema: {
    default: '', //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function () {
      
      //get a local reference to our entities and set some property variables
      const Context_AF = this;
      //Context_AF2  = this;

      Context_AF.question3Btn = document.querySelector('#question3_end3');

      Context_AF.question3Btn.setAttribute('visible', "false");
 

      Context_AF.el.addEventListener('click', function() {
          
            Context_AF.question3Btn.setAttribute('visible', "true");

      
      });        
    
  },
  
});

AFRAME.registerComponent('wrong_answer', {
  schema: {
    default: '', //duration is in milliseconds
  },
  multiple: false, //do not allow multiple instances of this component on this entity
  init: function () {
      
      //get a local reference to our entities and set some property variables
      const Context_AF = this;
  
        Context_AF.questionsPlane = document.querySelector('#question_plane');
  
        Context_AF.el.addEventListener('click', function(evt) {
            
          Context_AF.questionsPlane.setAttribute('animation__color', {property:'material.color', type:"color", from:"rgb(255, 0, 0)", to:"rgb(255, 255, 255)",  dur:4000, easing:'linear'});
          Context_AF.questionsPlane.setAttribute('animation__shake', {property:'position.x', from:1, to:0, loop:4, dur:300, easing:'linear'});
  
          console.log("wrong asnwer!")
        
        });        
    
  },
  
});


 
    </script>

    <a-scene>
        <!-- AFrame--> 

        <a-entity camera wasd-controls look-controls position="0 1.6 0">
            <a-entity cursor="rayOrigin:mouse;" raycaster="far:20; interval:200; objects:.interactive"></a-entity>
            <a-entity light="type:spot; intensity:1.5; castShadow:true; shadowBias:-0.5; angle:200; penumbra:4;" position="0.5 -0.5 0" rotation="0 0 0"></a-entity>
        </a-entity>
<a-entity>
        <a-entity id="amazing"
                  class="interactive" 
                  position="0 0.2 6"
                  geometry="primitive:box; width:0.4; height:0.4; depth:0.4;" 
                  material="color:rgb(255, 0, 0)"
                  animation= "property:material.color; type:color; from:rgb(255, 0, 255); to:rgb(255, 0, 0); dur:2000; easing:linear; startEvents: rotation-start; 
                                    pauseEvents: rotation-pause; resumeEvents: rotation-resume; restartEvents: rotation-restart"
                  shadow></a-entity>>
        </a-entity>
</a-entity>

<a-entity>
        <a-entity id="box2" 
        class="interactive" 
        position="2.5 0.2 8"
        geometry="primitive:box; width:0.4; height:0.4; depth:0.4;" 
        material="color:rgb(0, 250, 0)"
        shadow></a-entity>>
        </a-entity>
</a-entity>

        <a-entity id="plane"
                  position="0 0.01 0"
                  rotation="-90 0 0"
                  scale="10 10 10"
                  geometry="primitive:plane; width:1.0; height:1.0;" 
                  material="color:rgb(0, 255, 0);">
        </a-entity>

        
        
        <a-entity id="questions" position="-2.154 10 0" rotation="0 0 0">
            <a-entity id="question_plane" geometry="primitive:box; width: 15; height: 20.3 depth:0.9;" 
                    material="color:#d6931f;"
                    animation__color= "property:material.color; type:color; from:rgb(255, 0, 0); to:#d6931f;  dur:4000; easing:linear; startEvents: animation-start;"
                    animation__shake= "property:position.x; from:1; to:0; loop:4; dur:300; easing:linear; startEvents: shake-start;"
                    shadow>
            <a-entity id="question1" position="-1.895 0 0.536">
            <a-entity text="value:Q#1 - Choose the Correct Answer: ; 
                         color:black; font:roboto; width:15.700; anchor:left; baseline:top; wrapCount:30.640;" position="-4.997 8.564 0.052"></a-entity>  
            <a-entity id = "question1_title" text="value:Montreal was established by a group of religious mystics from France named Paul de Chomedy and Jeanne Mance in: ; 
                         color: #270803; font:roboto; width:12.440; anchor:left; baseline:top; wrapCount:24.65;" position="-4.286 6.177 0.168"></a-entity>                   
            <a-entity id="question1_buttons"  position="1.299 -0.430 0" scale="1 3.516 1" >   
      
                <a-gui-radio id = "question1_choice1" class= "interactive"  position="2.609 0.113 0.01" scale= "6.704 1.397 1" background-color= "#ffffff"
                material= "blending: additive; visible:false"
                width="2.5" height="0.75"
                value="1666"
                font-size="0.3"
                margin="0 0 0.05 0" shadow
                >
                </a-gui-radio>   
                <a-gui-radio id = "question1_choice2" class= "button interactive" question1_correct position="2.609 -0.997 0.01" scale= "6.704 1.397 1" background-color= "#ffffff"
                material= "blending: additive; visible:false"
                width="2.5" height="0.75"
                value="1642"
                font-size="0.3"
                margin="0 0 0.05 0" shadow
                >
                </a-gui-radio> 
                <a-gui-button id = "question1_end" class="interactive"  next_question  position="0.715 -2.1 0.01" scale= "3.609 1.142 0.853" 
                    width="2.5" height="0.75"
                    key-code="32"
                    position="0 0.025 0" scale="1.242 4.282 1.027"
                    value="Next Question"
                    margin="0 0 0.05 0"
                  >
                </a-gui-button>
    
              </a-entity> 
            </a-entity> 
            <a-entity id="question2" position="-1.895 0 0.536" visible="false">
              <a-entity text="value:Q#2 - Choose the Correct Answer: ; 
                         color:black; font:roboto; width:15.700; anchor:left; baseline:top; wrapCount:30.640;" position="-4.997 8.564 0.052"></a-entity>  
              <a-entity id = "question2_title" text="value: In 1663, _______ sent 800 women to Quebec to marry them off to French Canadian Men; 
                         color: #270803; font:roboto; width:12.440; anchor:left; baseline:top; wrapCount:24.65;" position="-4.286 6.177 0.168"></a-entity>                   
              <a-entity id="question2_buttons"  position="1.299 -0.430 0" scale="1 3.516 1" >   
      
                <a-gui-radio id = "question2_choice1" class= "" question2_correct position="2.609 0.113 0.01" scale= "6.704 1.397 1" background-color= "#ffffff"
                width="2.5" height="0.75"
                material= "blending: additive; visible:false"
                value="France"
                font-size="0.220"
                margin="0 0 0.05 0" shadow
                >
                </a-gui-radio>   
                <a-gui-radio id = "question2_choice2" class= "" position="2.609 -0.997 0.01" scale= "6.704 1.397 1" background-color= "#ffffff"
                width="2.5" height="0.75"
                material= "blending: additive; visible:false"
                value="England"
                font-size="0.220"
                margin="0 0 0.05 0" shadow
                >
                </a-gui-radio> 
                <a-gui-button id = "question2_end2" class= "interactive" next_question2 position="0.715 -2.1 0.01" scale= "3.609 1.142 0.853" 
                    width="2.5" height="0.75"
                    onclick="" key-code="32"
                    position="0 0.025 0" scale="1.242 4.282 1.027"
                    value="Next Question"
                    margin="0 0 0.05 0"
                  >
                </a-gui-button>
              </a-entity> 
            </a-entity>
            <a-entity id="question3" position="-1.895 0 0.536" visible="false">
              <a-entity text="value:Q#3 - Choose the Correct Answer: ; 
                         color:black; font:roboto; width:15.700; anchor:left; baseline:top; wrapCount:30.640;" position="-4.997 8.564 0.052"></a-entity>  
              <a-entity id = "question3_title" text="value: The oldest commercial corporation in North America, established in 1670, is called: ; 
                         color: #270803; font:roboto; width:12.440; anchor:left; baseline:top; wrapCount:24.65;" position="-4.286 6.177 0.168"></a-entity>                   
              <a-entity id="question3_buttons"  position="1.299 -0.430 0" scale="1 3.516 1" >   
      
                <a-gui-radio id = "question3_choice1" class= "" position="2.609 0.113 0.01" scale= "6.704 1.397 1" background-color= "#ffffff"
                width="2.5" height="0.75"
                material= "blending: additive; visible:false"
                value="Aldo"
                font-size="0.180"
                margin="0 0 0.05 0" shadow
                >
                </a-gui-radio>   
                <a-gui-radio id = "question3_choice2" class= "" question3_correct position="2.609 -0.997 0.01" scale= "6.704 1.397 1" background-color= "#ffffff"
                width="2.5" height="0.75"
                material= "blending: additive; visible:false"
                value="Hudson's Bay"
                font-size="0.180"
                margin="0 0 0.05 0" shadow
                >
                </a-gui-radio> 
                <a-gui-button id = "question3_end3" class= "interactive" position="0.715 -2.1 0.01" scale= "3.609 1.142 0.853" 
                    width="2.5" height="0.75"
                    onclick="document.location='transition2D.html'"
                    key-code="32"
                    position="0 0.025 0" scale="1.242 4.282 1.027"
                    value="Unlock Room"
                    margin="0 0 0.05 0"
                  >
                </a-gui-button>
              </a-entity> 
            </a-entity>
            </a-entity>

        </a-entity>
        <a-entity environment="preset:default"></a-entity>
    </a-scene>

    <script>

      var currentAnim = "animation-start";
      var currentAnim2 = "shake-start";

      document.querySelector("#question1_choice1").addEventListener("click", function() {
        document.getElementById("question_plane").emit(currentAnim);
        document.getElementById("question_plane").emit(currentAnim2);

        currentAnim = "animation-start";
        currentAnim2 = "shake-start";

      });

      document.querySelector("#question2_choice2").addEventListener("click", function() {
        document.getElementById("question_plane").emit(currentAnim);
        document.getElementById("question_plane").emit(currentAnim2);

        currentAnim = "animation-start";
        currentAnim2 = "shake-start";

      });

      document.querySelector("#question3_choice1").addEventListener("click", function() {
        document.getElementById("question_plane").emit(currentAnim);
        document.getElementById("question_plane").emit(currentAnim2);

        currentAnim = "animation-start";
        currentAnim2 = "shake-start";

      });

  
    </script>
</body>
</html>
